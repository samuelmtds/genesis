<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><title>Sample application - useradmin - genesis</title><style type="text/css" media="all">
          @import url("../style/maven-base.css");
          
          @import url("../style/maven-theme.css");</style><link rel="stylesheet" href="../style/print.css" type="text/css" media="print"></link><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"></meta><meta name="author" content="Allan Jones Batista de Castro
    "></meta><meta name="email" content="allanjones@dev.java.net"></meta></head><body class="composite"><div id="banner"><a href="https://genesis.dev.java.net/" id="projectLogo"><img alt="SOL Genesis" src="../genesis.gif"></img></a><div class="clear"><hr></hr></div></div><div id="breadcrumbs"><div class="xleft">Last published: 15 May 2007
                <span class="separator">|</span> Doc for  3.0-RC2
                </div><div class="xright">
        
        <a href="../index.html">genesis</a>
      
        
          
            <span class="separator">|</span>
          
        
        <a href="../multiproject/genesis-aspect/index.html">genesis-aspect</a>
      
        
          
            <span class="separator">|</span>
          
        
        <a href="../multiproject/genesis-client/index.html">genesis-client</a>
      
        
          
            <span class="separator">|</span>
          
        
        <a href="../multiproject/genesis-server/index.html">genesis-server</a>
      
        
          
            <span class="separator">|</span>
          
        
        <a href="../multiproject/genesis-shared/index.html">genesis-shared</a>
      
        
          
            <span class="separator">|</span>
          
        
        <a href="../tags/genesis-tags.html">genesis-xdoclet</a>
      </div><div class="clear"><hr></hr></div></div><div id="leftColumn"><div id="navcolumn"><div id="menugenesis"><h5>genesis</h5><ul><li class="none"><a href="../en/index.html">Overview</a></li><li class="none"><a href="../en/download.html">Downloads</a></li><li class="none"><a href="../en/release_notes.html">Release notes</a></li></ul></div><div id="menuDocumentation"><h5>Documentation</h5><ul><li class="expanded"><a href="../en/documentation_intro.html">User manual</a><ul><li class="none"><a href="../en/documentation_intro.html">Introduction</a></li><li class="none"><a href="../en/annotations.html">Using annotations</a></li><li class="none"><a href="../en/startup.html">Configuring genesis at startup</a></li><li class="expanded"><a href="../en/remoting.html">Basic features</a><ul><li class="none"><a href="../en/remoting.html">Transparent remoting</a></li><li class="none"><a href="../en/transactions.html">Transaction support</a></li><li class="none"><a href="../en/hibernate_integration.html">Hibernate integration</a></li><li class="none"><a href="../en/binding.html">Binding</a></li><li class="none"><a href="../en/actions.html">Implementing mixed actions</a></li></ul></li><li class="expanded"><a href="../en/thinlet_binding.html">Thinlet-specific features</a><ul><li class="none"><a href="../en/thinlet_binding.html">Thinlet Binding</a></li><li class="none"><a href="../en/customizing_widgets_creation.html">Customizing widget creation</a></li></ul></li><li class="expanded"><a href="../en/configuring_swt.html">SWT-specific features</a><ul><li class="none"><a href="../en/configuring_swt.html">Configuring SWT libraries</a></li></ul></li><li class="expanded"><a href="../en/conditions.html">Additional features</a><ul><li class="none"><a href="../en/conditions.html">Working with conditions</a></li><li class="none"><a href="../en/populating_with_dataproviders.html">Populating comboboxes, lists and tables</a></li><li class="none"><a href="../en/binding_toggle_buttons.html">Binding radiobuttons and checkboxes</a></li><li class="none"><a href="../en/binding_strategy.html">Configuring binding strategies</a></li><li class="none"><a href="../en/formatting.html">Formatting data</a></li><li class="none"><a href="../en/handling_errors.html">Handling errors</a></li><li class="none"><a href="../en/validating_data.html">Validating data</a></li><li class="none"><a href="../en/configuring_messages.html">Configuring messages</a></li><li class="none"><a href="../en/paging_and_dynamic_search.html">Paging and dynamic queries</a></li></ul></li><li class="none"><a href="../en/quick_reference.html">Annotation quick reference guide</a></li></ul></li><li class="expanded"><a href="../en/empty_project.html">Developing with genesis</a><ul><li class="none"><a href="../en/empty_project.html">For desktops</a></li><li class="none"><a href="../en/empty_web_project.html">For web</a></li></ul></li><li class="none"><strong><a href="../en/useradmin_sample.html">Using the UserAdmin sample</a></strong></li><li class="expanded"><a href="../en/advanced_introduction.html">Advanced guide</a><ul><li class="none"><a href="../en/xdoclet_extensions.html">XDoclet extensions</a></li><li class="none"><a href="../en/aspects.html">genesis aspects</a></li><li class="none"><a href="../en/generic_scripting.html">Generic scripting support</a></li><li class="none"><a href="../en/lookup_strategy.html">Widget lookup strategies</a></li><li class="none"><a href="../en/widget_binder.html">Customizing widget binding</a></li></ul></li><li class="none"><a href="../en/faq.html">FAQ</a></li><li class="none"><a href="http://wiki.java.net/bin/view/Projects/GenesisRoadmap" class="externalLink" title="External Link">Roadmap</a></li><li class="none"><a href="http://wiki.java.net/bin/view/Projects/Genesis" class="externalLink" title="External Link">Wiki</a></li></ul></div><div id="menuProject_Documentation"><h5>Project Documentation</h5><ul><li class="none"><a href="../index.html">About</a></li><li class="collapsed"><a href="../project-info.html">Project Info</a></li><li class="collapsed"><a href="../maven-reports.html">Project Reports</a></li><li class="none"><a href="http://maven.apache.org/development-process.html" class="externalLink" title="External Link">Development Process</a></li></ul></div><div id="menujava_net"><h5>java.net</h5><ul><li class="none"><a href="https://genesis.dev.java.net" class="externalLink" title="External Link">genesis.dev.java.net</a></li><li class="none"><a href="http://java.net" class="externalLink" title="External Link"><img title="java.net member" style="border: 1px" src="../java_dot_net_member.bmp" alt="java.net member"></img></a></li></ul></div><div id="legend"><h5>Legend</h5><ul><li class="externalLink">External Link</li><li class="newWindow">Opens in a new window</li></ul></div><a href="http://maven.apache.org/" title="Built by Maven" id="poweredBy"><img alt="Built by Maven" src="../images/logos/maven-button-1.png"></img></a></div></div><div id="bodyColumn"><div class="contentBox"><div class="section"><a name="Installing_the_useradmin_sample"></a><h2>Installing the useradmin sample</h2>
      <p>Installing the <code>useradmin</code> sample is a simple task. The
      <code>useradmin</code> sample can be found in the useradmin distribution
      or the full distribution genesis packages that can be found
      <a href="download.html">here</a>.
      Distributions for all samples are already setup to be run in 
      standalone/local mode or with the <a href="http://www.jboss.org/" class="externalLink" title="External Link">JBoss</a> application server, an open-source
      free server. This does not mean genesis only runs on this server; genesis
      was developed in a J2EE compatible way.</p>
      <p><a href="http://ant.apache.org/" class="externalLink" title="External Link">Ant</a> is required to run the 
      useradmin sample. To run this sample in remote mode, it's the <a href="http://www.jboss.org/" class="externalLink" title="External Link">JBoss</a> application server is also 
      required.</p>
      <p>Learn how to run this sample in local mode (without an application 
      server) <a href="#Running_in_local_mode">here</a>.</p>
      <p>Learn how to run this sample in remote mode (using an application 
      server) <a href="#Running_in_remote_mode">here</a>.</p>
      <p>To use the SWT portion of useradmin's sample, read the instructions
      <a href="configuring_swt.html">here</a>.</p>
    </div><div class="section"><a name="useradmin_sample_s_purpose"></a><h2>useradmin sample's purpose</h2>
      <p>useradmin sample's purpose is to demonstrate to users genesis' major
      features and also is a great example of transparent remoting in action, 
      since with the same source code, it's possible to run the sample using 
      either remote or local calls.</p>
      <p>The sample has two source code dirs,
      <code>&lt;GENESIS_DIST&gt;/samples/useradmin/modules/client/src</code> and
      <code>&lt;GENESIS_DIST&gt;/samples/useradmin/modules/shared/src</code>, 
      that contain the client module and the client/server shared module,
      respectively.</p>
      <p>The client module source dir contains UI related classes. The useradmin 
      sample uses three different UI technologies: <a href="http://www.thinlet.com/" class="externalLink" title="External Link">Thinlet</a>, <a href="http://java.sun.com/products/jfc/" class="externalLink" title="External Link">Swing</a> and <a href="http://www.eclipse.org/swt/" class="externalLink" title="External Link">SWT</a>. To use SWT, read the 
      instructions <a href="configuring_swt.html">here</a>.</p>
      <p>The package <code>net.java.dev.genesis.samples.useradmin.ui</code> 
      contains files that define the UI logic (rules to enable and disable 
      fields, actions, etc). We call these classes <b>forms</b> and <b>they are 
      independent</b> of UI technology. For example, <code><b>UserListForm.java</b></code> it's a Java class
      whose fields represent screen data e it has methods that represent screen actions.</p>

      <p>At Thinlet (package <code>net.java.dev.genesis.samples.useradmin.ui.thinlet</code>)
      we found two file types that define the UI. Let's consider the useradmin search screen:</p>
      <ul>
        <li><code><b>user-list.xml</b></code>: Thinlet xml file that describes
        how UI components are arranged on the screen. Component names match
        field names and method names in the form.</li>
        <li><code><b>UserListView.java</b></code>: Java class responsible for
        the screen, where the UI dimensions are defined, which UI xml file to
        use and that <code>binds</code> a form to a view. Other auxiliary
        methods may be defined by this class in order to allow other screens to
        be open or to programatically invoke a form action.</li>
      </ul>

      <p>At Swing (package <code>net.java.dev.genesis.samples.useradmin.ui.swing</code>
      and sub-packages) we found the UI skeleton coded using Swing.
      Let's consider the useradmin search screen:</p>
      <ul>
         <li><code><b>UserListView.java</b></code>: Java class coded using Swing
         and responsible for the search screen, where the UI dimensions are defined and
         how UI components are arranged on the screen. The <code>binding</code>
         with a specific form is done, that means that the form will handle
         the UI events. Other auxiliary methods are defined to make possible
         other windows to be opened and programatically call some action of this
         screen.</li>
      </ul>

      <p>At SWT (package <code>net.java.dev.genesis.samples.useradmin.ui.swt</code>
      and sub-packages)  we found the UI skeleton coded using SWT.
      Let's consider the useradmin search screen:</p>
      <ul>
         <li><code><b>UserListView.java</b></code>: Java class coded using SWT
         and responsible for the search screen, where the UI dimensions are defined and
         how UI components are arranged on the screen. The <code>binding</code>
         with a specific form is done, that means that the form will handle
         the UI events. Other auxiliary methods are defined to make possible
         other windows to be opened and programatically call some action of this
         screen.</li>
      </ul>

      <p>The shared module source dir contains the source files that implement
      business logic (commands) and others that are Hibernate mapped classes
      (databeans). A command example is
      <code>net.java.dev.genesis.samples.useradmin.business.UserCreateCommand
      </code>:</p>

    <div class="source"><pre>
public class UserCreateCommand extends AbstractHibernateCommand {

   @Transactional
   public Serializable createUser(final User user) throws Exception {
      return getSession().save(user);
   }


}
</pre></div>
  
      <p>This example shows how simple and straight commands can be. The command
      shown above has just a transactional method that persists a user in the
      database. Transaction commit/rollback is automatically hanlded by genesis.
      </p>
      <p>As a databean example, let's examine
      <code>net.java.dev.genesis.samples.useradmin.databeans.User</code>, a
      class that represents a User entity mapped to a table using XDoclet tags:
      </p>

    <div class="source"><pre>
/**
 * @hibernate.class
 *
 * @hibernate.query name="User.findByRole"
 *          query="from User u where u.role.code = :roleCode"
 */
public class User implements Serializable {
   private Long id;
   private String name;
   private String login;
   private String password;
   private String email;
   private Date birthday;
   private String address;
   private Role role;
   private Country country;
   private State state;

   /**
    * @hibernate.property
    */
   public Date getBirthday() {
      return birthday;
   }

   public void setBirthday(Date birthday) {
      this.birthday = birthday;
   }

   /**
    * @hibernate.property
    type="net.java.dev.genesis.samples.useradmin.databeans.CountryType"
    */
   public Country getCountry() {
      return country;
   }

   public void setCountry(Country country) {
      this.country = country;
   }

   /**
    * @hibernate.property
    */
   public String getEmail() {
      return email;
   }

   public void setEmail(String email) {
      this.email = email;
   }

   /**
    * @hibernate.property
    */
   public String getAddress() {
      return address;
   }

   public void setAddress(String address) {
      this.address = address;
   }

   /**
    * @hibernate.many-to-one
    */
   public Role getRole() {
      return role;
   }

   public void setRole(Role role) {
      this.role = role;
   }

   /**
    * @hibernate.id generator-class="increment"
    */
   public Long getId() {
      return id;
   }

   public void setId(Long id) {
      this.id = id;
   }

   /**
    * @hibernate.property
    */
   public String getLogin() {
      return login;
   }

   public void setLogin(String login) {
      this.login = login;
   }

   /**
    * @hibernate.property
    */
   public String getName() {
      return name;
   }

   public void setName(String name) {
      this.name = name;
   }

   /**
    * @hibernate.property
    */
   public String getPassword() {
      return password;
   }

   public void setPassword(String password) {
      this.password = password;
   }

   /**
    * @hibernate.property
    type="net.java.dev.genesis.samples.useradmin.databeans.StateType"
    */
   public State getState() {
      return state;
   }

   public void setState(State state) {
      this.state = state;
   }
}
</pre></div>
  
      <p>A databean is JavaBean compliant class, i.e., one that exposes
      properties through getters and setters. It doesn't have to implement any
      interface nor to extend any abstract class. It is convenient to implement
      <code>java.io.Serializable</code> so the class can be used as a parameter
      or as a return value for a remote call.</p>
    </div><div class="section"><a name="Running_in_local_mode"></a><h2>Running in local mode</h2>
       <p>To run this sample in local mode, you will need:</p>
       <ul>
          <li>The <a href="http://ant.apache.org/" class="externalLink" title="External Link">Ant</a> tool, prefer the latest
            version (currently Ant 1.6.5)</li>
       </ul>
       
       <p>Follow the steps:</p>
       <ul>
        <li>Make a copy of <code>buid.properties.sample</code> file and rename to
        <code>build.properties</code></li>
        <li>Edit the <code>build.properties</code> file, modifying or commenting
        the properties according your needs. Take a look on a configuration sample:</li>

    <div class="source"><pre>
## Build properties sample ##

# Here we defined that it won't run in remote mode
remote.mode=false
   
# In local mode, a database is needed. In this case, we use HSQLDB
jdbc.driver=target/hsqldb.jar
</pre></div>
  
        <li>In command line, executes the ant script:

    <div class="source"><pre>
c:\genesis\samples\useradmin&gt;ant install
</pre></div>
  
        This command will start the installation process.
        It will only copy all dependant libraries to the folder where the application
        jar resides.</li>
        <li>To run the sample, run the ant task:</li>

    <div class="source"><pre>
c:\genesis\samples\useradmin&gt;ant run:local
</pre></div>
  
        <li>Or use the command line:</li>

    <div class="source"><pre>
c:\genesis\samples\useradmin\target&gt;java -jar useradmin-local-weaved.jar
</pre></div>
  
        <li>Or double-click the file <code>useradmin-local-weaved.jar</code></li>
      </ul>
    </div><div class="section"><a name="Running_in_remote_mode"></a><h2>Running in remote mode</h2>
      <p>To run this sample in remote mode, you will need:</p>
       <ul>
          <li>The <a href="http://ant.apache.org/" class="externalLink" title="External Link">Ant</a> tool, prefer the latest
            version (currently Ant 1.6.5)</li>
          <li>The <a href="http://www.jboss.org/" class="externalLink" title="External Link">JBoss</a> Application Server,
          prefer the latest version of the series 3.2.x or 4.0.x</li>
       </ul>
      <p>To run this sample in remote mode, follow the steps:</p>
      <ul>
        <li>Make a copy of <code>buid.properties.sample</code> file and rename to
        <code>build.properties</code></li>
        <li>Edit the <code>build.properties</code> file, modifying or commenting
        the properties according your needs. Take a look on a configuration sample:</li>

    <div class="source"><pre>
## Build properties sample ##

# Here we defined that it won't run in local mode
local.mode=false
   
# Here we define the JBoss Home directory
jboss.home=/opt/jboss-3.2.7
</pre></div>
  
        <li>In the command line, run the ant script:

    <div class="source"><pre>
c:\genesis\samples\useradmin&gt;ant install
</pre></div>
  
        The installation process will start and a folder called
        "useradmin" will be created at the <code>server</code> folder of
        JBoss Application Server. That folder contains the useradmin sample,
        its configuration and all of its dependencies.</li>
        <li>After the installation process, start JBoss with the following
        command:</li>

    <div class="source"><pre>
&lt;JBOSS_HOME&gt;\bin&gt;run -c useradmin
</pre></div>
  
        <li>After JBoss starts, the sample can be executed accessing the URL
        <a href="http://localhost:8080/useradmin/" class="externalLink" title="External Link">
        http://localhost:8080/useradmin/</a>. The
        "<a href="http://localhost:8080/useradmin/application/remote.jnlp" class="externalLink" title="External Link">
        Run remote User Admin</a>" link will download, install and run the sample
        on the user machine, with Java Web Start technology</li>
        <li>Another option, is run the sample with the following ant task:</li>

    <div class="source"><pre>
c:\genesis\samples\useradmin&gt;ant run:remote
</pre></div>
  
        <li>If you have left local mode enabled, you can run the sample in local mode throught the link
        "<a href="http://localhost:8080/useradmin/application/local.jnlp" class="externalLink" title="External Link">Run local User Admin</a>"
        of <a href="http://localhost:8080/useradmin/" class="externalLink" title="External Link">http://localhost:8080/useradmin/</a> page.</li>
       </ul>
    </div><div class="section"><a name="Considerations"></a><h2>Considerations</h2>
      <p>This sample goal is to demonstrate how a project might be structured
      and how to use genesis features. It's recommended to start new genesis-
      based projects by using the <a href="empty_project.html">empty project</a>
      as a start point and use this sample as a refenrece.</p>
    </div></div></div><div class="clear"><hr></hr></div><div id="footer"><div class="xright">© 2004-2007, Summa Tecnologies do Brasil Ltda.</div><div class="clear"><hr></hr></div></div></body></html>