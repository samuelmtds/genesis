<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><title>Empty WEB project structure - genesis</title><style type="text/css" media="all">
          @import url("../style/maven-base.css");
          
          @import url("../style/maven-theme.css");</style><link rel="stylesheet" href="../style/print.css" type="text/css" media="print"></link><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"></meta><meta name="author" content="Allan Jones Batista de Castro
    "></meta><meta name="email" content="allanjones@dev.java.net"></meta></head><body class="composite"><div id="banner"><a href="https://genesis.dev.java.net/" id="projectLogo"><img alt="SOL Genesis" src="../genesis.gif"></img></a><div class="clear"><hr></hr></div></div><div id="breadcrumbs"><div class="xleft">Last published: 18 August 2006
                <span class="separator">|</span> Doc for  3.0-EA3
                </div><div class="xright">
        
        <a href="../index.html">genesis</a>
      
        
          
            <span class="separator">|</span>
          
        
        <a href="../multiproject/genesis-aspect/index.html">genesis-aspect</a>
      
        
          
            <span class="separator">|</span>
          
        
        <a href="../multiproject/genesis-client/index.html">genesis-client</a>
      
        
          
            <span class="separator">|</span>
          
        
        <a href="../multiproject/genesis-server/index.html">genesis-server</a>
      
        
          
            <span class="separator">|</span>
          
        
        <a href="../multiproject/genesis-shared/index.html">genesis-shared</a>
      
        
          
            <span class="separator">|</span>
          
        
        <a href="../tags/genesis-tags.html">genesis-xdoclet</a>
      </div><div class="clear"><hr></hr></div></div><div id="leftColumn"><div id="navcolumn"><div id="menugenesis"><h5>genesis</h5><ul><li class="none"><a href="../en/index.html">Overview</a></li><li class="none"><a href="../en/screenshots.html">Screenshots</a></li><li class="none"><a href="../en/download.html">Downloads</a></li><li class="none"><a href="../en/release_notes.html">Release notes</a></li></ul></div><div id="menuDocumentation"><h5>Documentation</h5><ul><li class="expanded"><a href="../en/documentation_intro.html">User manual</a><ul><li class="none"><a href="../en/documentation_intro.html">Introduction</a></li><li class="none"><a href="../en/annotations.html">Using annotations</a></li><li class="none"><a href="../en/startup.html">Configuring genesis at startup</a></li><li class="expanded"><a href="../en/remoting.html">Basic features</a><ul><li class="none"><a href="../en/remoting.html">Transparent remoting</a></li><li class="none"><a href="../en/transactions.html">Transaction support</a></li><li class="none"><a href="../en/hibernate_integration.html">Hibernate integration</a></li><li class="none"><a href="../en/binding.html">Binding</a></li><li class="none"><a href="../en/actions.html">Implementing mixed actions</a></li></ul></li><li class="expanded"><a href="../en/thinlet_binding.html">Thinlet-specific features</a><ul><li class="none"><a href="../en/thinlet_binding.html">Thinlet Binding</a></li><li class="none"><a href="../en/customizing_widgets_creation.html">Customizing widget creation</a></li></ul></li><li class="expanded"><a href="../en/conditions.html">Additional features</a><ul><li class="none"><a href="../en/conditions.html">Working with conditions</a></li><li class="none"><a href="../en/populating_with_dataproviders.html">Populating comboboxes, lists and tables</a></li><li class="none"><a href="../en/formatting.html">Formatting data</a></li><li class="none"><a href="../en/handling_errors.html">Handling errors</a></li><li class="none"><a href="../en/validating_data.html">Validating data</a></li><li class="none"><a href="../en/configuring_messages.html">Configuring messages</a></li><li class="none"><a href="../en/paging_and_dynamic_search.html">Paging and dynamic queries</a></li></ul></li><li class="none"><a href="../en/quick_reference.html">Annotation quick reference guide</a></li></ul></li><li class="expanded"><a href="../en/empty_project.html">Developing with genesis</a><ul><li class="none"><a href="../en/empty_project.html">For desktops</a></li><li class="none"><strong><a href="../en/empty_web_project.html">For web</a></strong></li></ul></li><li class="none"><a href="../en/useradmin_sample.html">Using the UserAdmin sample</a></li><li class="expanded"><a href="../en/advanced_introduction.html">Advanced guide</a><ul><li class="none"><a href="../en/xdoclet_extensions.html">XDoclet Extensions</a></li><li class="none"><a href="../en/aspects.html">genesis aspects</a></li><li class="none"><a href="../en/generic_scripting.html">Generic scripting support</a></li></ul></li><li class="none"><a href="../en/faq.html">FAQ</a></li><li class="none"><a href="http://wiki.java.net/bin/view/Projects/GenesisRoadmap" class="externalLink" title="External Link">Roadmap</a></li><li class="none"><a href="http://wiki.java.net/bin/view/Projects/Genesis" class="externalLink" title="External Link">Wiki</a></li></ul></div><div id="menuProject_Documentation"><h5>Project Documentation</h5><ul><li class="none"><a href="../index.html">About</a></li><li class="collapsed"><a href="../project-info.html">Project Info</a></li><li class="collapsed"><a href="../maven-reports.html">Project Reports</a></li><li class="none"><a href="http://maven.apache.org/development-process.html" class="externalLink" title="External Link">Development Process</a></li></ul></div><div id="menujava_net"><h5>java.net</h5><ul><li class="none"><a href="https://genesis.dev.java.net" class="externalLink" title="External Link">genesis.dev.java.net</a></li><li class="none"><a href="http://java.net" class="externalLink" title="External Link"><img title="java.net member" style="border: 1px" src="../java_dot_net_member.bmp" alt="java.net member"></img></a></li></ul></div><div id="legend"><h5>Legend</h5><ul><li class="externalLink">External Link</li><li class="newWindow">Opens in a new window</li></ul></div><a href="http://maven.apache.org/" title="Built by Maven" id="poweredBy"><img alt="Built by Maven" src="../images/logos/maven-button-1.png"></img></a></div></div><div id="bodyColumn"><div class="contentBox"><div class="section"><a name="How_to_start_"></a><h2>How to start?</h2>
      <p>genesis was conceived having as a goal to make development easier and
      faster. In order to allow someone to use it in an easier and faster way,
      we made available a whole empty project structure, so you just need to
      code your own classes. All compilation and installations process are
      already configured in this empty web project.</p>
      <p>It's extremely important you have already read genesis docs and
      understood its concepts and features. Before starting to code, read the <a href="documentation_intro.html">User Manual</a> and <a href="jars_explained.html">understand genesis distribution jars</a>.</p>
      <p>We call an empty web project strutucture <code>empty-web-project</code> and it
      comes with genesis-empty-web-project distribution or genesis-all distribution.
      This structure can be found in dir
      <code><b>&lt;GENESIS_DISTRIBUTION&gt;/samples/empty-web-project/</b></code>.</p>
      <p>Take a look at some configuration samples <a href="#Scenarios">here</a></p>
    </div><div class="section"><a name="What_is_needed_"></a><h2>What is needed?</h2>
      <p>Besides genesis, it is necessary:</p>
      <ul>
        <li>genesis distribution along its dependency libraries.</li>
        <li><a href="http://www.jboss.org/" class="externalLink" title="External Link">JBoss</a> server. We recommend a
        3.2.x or 4.0.x release.</li>
        <li>To compile and install the application we recommend
        <a href="http://ant.apache.org/" class="externalLink" title="External Link">Apache Ant</a> 1.6.5.</li>
      </ul>
    </div><div class="section"><a name="Configuring_a_new_project"></a><h2>Configuring a new project</h2>
      <p>You can copy the whole <b>empty-web-project</b> structure to a development
      directory of your choice. The first step to configure a new project is to
      copy the file named <code>build.properties.sample</code> to a new one
      named <code>build.properties</code>. File <code>build.properties</code>
      defines certain proprerties that are project or developer specific. The
      initial content for <code>build.properties.sample</code> is as follows:</p>

    <div class="source"><pre>
## Build properties sample ##

#################################################################################
## The following property must be defined in build.properties with an           #
## appropriate value for the local environment                                  #
jboss.home=/opt/jboss-3.2.7
genesisBasedApplication.name=empty-web-project
genesisBasedApplication.prettyName=Empty Web Project
#################################################################################


#################################################################################
## These properties already have a default value defined in build.xml and only  #
## need to be defined in build.properties if their values are different in your #
## local setup                                                                  #
#genesis.home=../../genesis
#jboss.datasource.jndi.name=java:/DefaultDS
#jboss.datasource.config.xml=${jboss.home}/server/default/deploy/hsqldb-ds.xml
#hibernate.dialect=net.sf.hibernate.dialect.HSQLDialect
#hibernate.version=2.1.8
#hibernate.show.sql=true
#hibernate.session.factory.jndi.name=jboss:/hibernate/SessionFactory
#hibernate.jboss.service.name=HibernateFactory,name=HibernateFactory
#################################################################################
</pre></div>
  
      <p>At least three properties must be defined:</p>
      <ul>
        <li><code><b>jboss.home</b></code>: Indicates where JBoss 3.2.x or 4.0.x is
        installed</li>
        <li><code><b>genesisBasedApplication.name</b></code>: Choose a name for
        your project, preferably with no spaces in it.</li>
        <li><code><b>genesisBasedApplication.prettyName</b></code>: Defines a
        descriptive name for your project. This name may contain spaces.</li>
      </ul>
      <p>There are other optional properties that have got a default value, but
      may be redefined. Some of them are:</p>
      <ul>
        <li><code><b>genesis.home</b></code>: Indicates where genesis is
        located. Usually this directory will be something like <code><b>&lt;
        SOME_DIRECTORY&gt;/genesis-&lt;version&gt;/genesis</b></code></li>
        <li><code><b>jboss.datasource.config.xml</b></code>: Indicates the JBoss 
        datasource config file location. You can supply another config file that 
        matches your database configuration.</li>
        <li><code><b>hibernate.dialect</b></code>: Indicates what SQL dialect 
        Hibernate will use. If you're going to use any database other than 
        HSQLDB, you must supply the correct dialect. You can find further 
        information about how to configure dialects at the <a href="http://www.hibernate.org/" class="externalLink" title="External Link">Hibernate site</a>.
        </li>
      </ul>
      <p>To make understanding easier, let's imagine a cenario for a new genesis
      based project creation:</p>
      <ul>
        <li>We have JBoss 4.0.4.GA installed at <code>C:\servers\jboss-4.0.4.GA</code>
        </li>
        <li>We install genesis dist at <code>C:\projects</code>, what creates a
        <code>C:\projects\genesis-&lt;version&gt;</code> dir.</li>
        <li>The project will be called<b>helloworld</b> and its descriptive name
        will be <b>Hello World</b>.</li>
        <li>The main project class will be <b>exemplo.HelloWorld</b>.</li>
      </ul>
      <p>Our <code><b>build.properties</b></code> file may look like:</p>

    <div class="source"><pre>
jboss.home=c:/servers/jboss-4.0.4.GA
genesisBasedApplication.name=helloworld
genesisBasedApplication.prettyName=Hello World

genesis.home=c:/projects/genesis-&lt;version&gt;/genesis
</pre></div>
  
    </div><div class="section"><a name="Developing_with_genesis"></a><h2>Developing with genesis</h2>
      <p>There are two source dirs in the project:</p>
      <ul>
        <li><b>&lt;PROJECT_DIR&gt;/modules/web/src</b>: Dir that contains all
        source files related to the web side of your application (servlets, 
        context listeners, and other classes related to the view tier).</li>
        <li><b>&lt;PROJECT_DIR&gt;/modules/shared/src</b>: Dir that contains all
        source files that both the web side and the ejb container side will need.
        Generally classes that represent business logic and have
        transactional/remotable methods (<b>Commands</b>) are put there.
        Together with them, we have what we call <b>Databeans</b>, i.e.,
        Hibernate mapped objects, named that way since they go from the view
        layer to the persistence layer.</li>
      </ul>
      <p>Another web dir can be found at 
      <b>&lt;PROJECT_DIR&gt;/modules/web/content</b> and must contains
      html, jsp, javascript, pics, xml and other files that usually are part of
      war files.</p>
      <p>The last dir is <b>&lt;PROJECT_DIR&gt;/modules/web/lib</b>
      where you should put jars related to your web-tier, such as struts.jar 
      (if you are using struts).</p>
    </div><div class="section"><a name="Compiling_and_installing_your_application"></a><h2>Compiling and installing your application</h2>
      <p>The project can be compiled and installed on JBoss using <a href="http://ant.apache.org/" class="externalLink" title="External Link">Ant</a>.</p>
      <p>To compile and install your application we have the following basic Ant
      targets:</p>
      <ul>
        <li><b>all</b>: Compiles, packages and deploys your application</li>
        <li><b>clean</b>: Deletes all files generated during
        compilation.</li>
        <li><b>clean-build</b>: It does the same as running <code>clean</code> and
        <code>all</code> in sequence.</li>
      </ul>
      <p>The faster way to put your project to run is:

    <div class="source"><pre>
ant all
&lt;JBOSS_DIR&gt;/bin/run -c &lt;genesisBasedApplication.name&gt;

So, go to your application url, i.e:
http://localhost:8080/&lt;genesisBasedApplication.name&gt;
</pre></div>
  
      </p>
    </div><div class="section"><a name="Scenarios"></a><h2>Scenarios</h2>
       <p>We have some samples on how to configure an empty project in some scenarios. The samples are shown below:</p>
       <div class="subsection"><a name="WEB_Application_using_MySQL_and_Struts"></a><h3>WEB Application using MySQL and Struts</h3>
<p><b>build.properties</b> file</p>

    <div class="source"><pre>
### general configuration
genesisBasedApplication.name=myapplication
genesisBasedApplication.prettyName=My Application
  
### configure genesis home directory
genesis.home=D:/opensource/genesis-3.0/genesis
  
### configure JBoss home directory
jboss.home=D:/servers/jboss-4.0.4.GA

### set up the location of mysql jdbc driver
jdbc.driver=lib/mysql/mysqlconnector.jar
  
## configure your Database
jboss.datasource.jndi.name=java:/MySqlDS
jboss.datasource.config.xml=conf/mysql-ds.xml
hibernate.dialect=net.sf.hibernate.dialect.MySQLDialect
</pre></div>
  
<p><b>conf/mysql-ds.xml</b> file</p>

    <div class="source"><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;!-- $Id: empty_web_project.html,v 1.1.1.1 2006-08-19 18:52:07 sol Exp $ --&gt;
&lt;!--  Datasource config for MySQL using 3.0.9 available from:
http://www.mysql.com/downloads/api-jdbc-stable.html
--&gt;

&lt;datasources&gt;
  &lt;local-tx-datasource&gt;
    &lt;jndi-name&gt;MySqlDS&lt;/jndi-name&gt;
    &lt;connection-url&gt;jdbc:mysql://localhost:3306/mydatabase&lt;/connection-url&gt;
    &lt;driver-class&gt;com.mysql.jdbc.Driver&lt;/driver-class&gt;
    &lt;user-name&gt;myuser&lt;/user-name&gt;
    &lt;password&gt;mypassword&lt;/password&gt;
    &lt;exception-sorter-class-name&gt;org.jboss.resource.adapter.jdbc.vendor.MySQLExceptionSorter&lt;/exception-sorter-class-name&gt;
    &lt;!-- should only be used on drivers after 3.22.1 with "ping" support
    &lt;valid-connection-checker-class-name&gt;org.jboss.resource.adapter.jdbc.vendor.MySQLValidConnectionChecker&lt;/valid-connection-checker-class-name&gt;
    --&gt;
    &lt;!-- sql to call when connection is created
    &lt;new-connection-sql&gt;some arbitrary sql&lt;/new-connection-sql&gt;
      --&gt;
    &lt;!-- sql to call on an existing pooled connection when it is obtained from pool - MySQLValidConnectionChecker is preferred for newer drivers
    &lt;check-valid-connection-sql&gt;some arbitrary sql&lt;/check-valid-connection-sql&gt;
      --&gt;

    &lt;!-- corresponding type-mapping in the standardjbosscmp-jdbc.xml (optional) --&gt;
    &lt;metadata&gt;
       &lt;type-mapping&gt;mySQL&lt;/type-mapping&gt;
    &lt;/metadata&gt;
  &lt;/local-tx-datasource&gt;
&lt;/datasources&gt;

</pre></div>
  
<p><b>build.xml</b> file</p>

    <div class="source"><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project name="myproject" default="all" basedir="." xmlns:genesis="https://genesis.dev.java.net/nonav/ns/master_build.xml"&gt;
  &lt;import file="web_build.xml" /&gt;

  &lt;target name="-pre-init"&gt;
    &lt;property file="build.properties" /&gt;

    &lt;!-- It's not necessary any other configuration, you just have to put struts jar in modules/web/lib directory --&gt;
  &lt;/target&gt;
&lt;/project&gt;

</pre></div>
  
       </div>
    </div></div></div><div class="clear"><hr></hr></div><div id="footer"><div class="xright">© 2004-2006, Summa Tecnologies do Brasil Ltda.</div><div class="clear"><hr></hr></div></div></body></html>