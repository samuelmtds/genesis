<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><title>Binding - genesis</title><style type="text/css" media="all">
          @import url("../style/maven-base.css");
          
          @import url("../style/maven-theme.css");</style><link rel="stylesheet" href="../style/print.css" type="text/css" media="print"></link><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"></meta><meta name="author" content="Michael Nascimento Santos"></meta><meta name="email" content="mister__m@dev.java.net"></meta></head><body class="composite"><div id="banner"><a href="https://genesis.dev.java.net/" id="projectLogo"><img alt="SOL Genesis" src="../genesis.gif"></img></a><div class="clear"><hr></hr></div></div><div id="breadcrumbs"><div class="xleft">Last published: 13 December 2006
                <span class="separator">|</span> Doc for  3.0-EA5
                </div><div class="xright">
        
        <a href="../index.html">genesis</a>
      
        
          
            <span class="separator">|</span>
          
        
        <a href="../multiproject/genesis-aspect/index.html">genesis-aspect</a>
      
        
          
            <span class="separator">|</span>
          
        
        <a href="../multiproject/genesis-client/index.html">genesis-client</a>
      
        
          
            <span class="separator">|</span>
          
        
        <a href="../multiproject/genesis-server/index.html">genesis-server</a>
      
        
          
            <span class="separator">|</span>
          
        
        <a href="../multiproject/genesis-shared/index.html">genesis-shared</a>
      
        
          
            <span class="separator">|</span>
          
        
        <a href="../tags/genesis-tags.html">genesis-xdoclet</a>
      </div><div class="clear"><hr></hr></div></div><div id="leftColumn"><div id="navcolumn"><div id="menugenesis"><h5>genesis</h5><ul><li class="none"><a href="../en/index.html">Overview</a></li><li class="none"><a href="../en/download.html">Downloads</a></li><li class="none"><a href="../en/release_notes.html">Release notes</a></li></ul></div><div id="menuDocumentation"><h5>Documentation</h5><ul><li class="expanded"><a href="../en/documentation_intro.html">User manual</a><ul><li class="none"><a href="../en/documentation_intro.html">Introduction</a></li><li class="none"><a href="../en/annotations.html">Using annotations</a></li><li class="none"><a href="../en/startup.html">Configuring genesis at startup</a></li><li class="expanded"><a href="../en/remoting.html">Basic features</a><ul><li class="none"><a href="../en/remoting.html">Transparent remoting</a></li><li class="none"><a href="../en/transactions.html">Transaction support</a></li><li class="none"><a href="../en/hibernate_integration.html">Hibernate integration</a></li><li class="none"><strong><a href="../en/binding.html">Binding</a></strong></li><li class="none"><a href="../en/actions.html">Implementing mixed actions</a></li></ul></li><li class="expanded"><a href="../en/thinlet_binding.html">Thinlet-specific features</a><ul><li class="none"><a href="../en/thinlet_binding.html">Thinlet Binding</a></li><li class="none"><a href="../en/customizing_widgets_creation.html">Customizing widget creation</a></li></ul></li><li class="expanded"><a href="../en/configuring_swt.html">SWT-specific features</a><ul><li class="none"><a href="../en/configuring_swt.html">Configuring SWT libraries</a></li></ul></li><li class="expanded"><a href="../en/conditions.html">Additional features</a><ul><li class="none"><a href="../en/conditions.html">Working with conditions</a></li><li class="none"><a href="../en/populating_with_dataproviders.html">Populating comboboxes, lists and tables</a></li><li class="none"><a href="../en/formatting.html">Formatting data</a></li><li class="none"><a href="../en/handling_errors.html">Handling errors</a></li><li class="none"><a href="../en/validating_data.html">Validating data</a></li><li class="none"><a href="../en/configuring_messages.html">Configuring messages</a></li><li class="none"><a href="../en/paging_and_dynamic_search.html">Paging and dynamic queries</a></li></ul></li><li class="none"><a href="../en/quick_reference.html">Annotation quick reference guide</a></li></ul></li><li class="expanded"><a href="../en/empty_project.html">Developing with genesis</a><ul><li class="none"><a href="../en/empty_project.html">For desktops</a></li><li class="none"><a href="../en/empty_web_project.html">For web</a></li></ul></li><li class="none"><a href="../en/useradmin_sample.html">Using the UserAdmin sample</a></li><li class="expanded"><a href="../en/advanced_introduction.html">Advanced guide</a><ul><li class="none"><a href="../en/xdoclet_extensions.html">XDoclet extensions</a></li><li class="none"><a href="../en/aspects.html">genesis aspects</a></li><li class="none"><a href="../en/generic_scripting.html">Generic scripting support</a></li><li class="none"><a href="../en/lookup_strategy.html">Widget lookup strategies</a></li><li class="none"><a href="../en/widget_binder.html">Customizing widget binding</a></li></ul></li><li class="none"><a href="../en/faq.html">FAQ</a></li><li class="none"><a href="http://wiki.java.net/bin/view/Projects/GenesisRoadmap" class="externalLink" title="External Link">Roadmap</a></li><li class="none"><a href="http://wiki.java.net/bin/view/Projects/Genesis" class="externalLink" title="External Link">Wiki</a></li></ul></div><div id="menuProject_Documentation"><h5>Project Documentation</h5><ul><li class="none"><a href="../index.html">About</a></li><li class="collapsed"><a href="../project-info.html">Project Info</a></li><li class="collapsed"><a href="../maven-reports.html">Project Reports</a></li><li class="none"><a href="http://maven.apache.org/development-process.html" class="externalLink" title="External Link">Development Process</a></li></ul></div><div id="menujava_net"><h5>java.net</h5><ul><li class="none"><a href="https://genesis.dev.java.net" class="externalLink" title="External Link">genesis.dev.java.net</a></li><li class="none"><a href="http://java.net" class="externalLink" title="External Link"><img title="java.net member" style="border: 1px" src="../java_dot_net_member.bmp" alt="java.net member"></img></a></li></ul></div><div id="legend"><h5>Legend</h5><ul><li class="externalLink">External Link</li><li class="newWindow">Opens in a new window</li></ul></div><a href="http://maven.apache.org/" title="Built by Maven" id="poweredBy"><img alt="Built by Maven" src="../images/logos/maven-button-1.png"></img></a></div></div><div id="bodyColumn"><div class="contentBox"><div class="section"><a name="Binding"></a><h2>Binding</h2>
      <p>One of the most innovative genesis features is its <b>binding</b>. This
      feature keeps the UI always in synch with a JavaBean, which is called a 
      <b>form</b>. Three graphical toolkits are currently supported for this 
      integration: Swing, SWT and Thinlet. Below there is a basic example of how 
      to implement a login screen using the binding for each APIs . First, there 
      is the form class definition:</p>

    <div class="source"><pre>
@Form
public class LoginForm {
   private String user;
   private String password;

   public String getUser() {
      return user;
   }

   public void setUser(String user) {
      this.user = user;
   }

   public String getPassword() {
      return password;
   }

   public void setPassword(String password) {
      this.password = password;
   }

   @Action
   public void login() {
      System.out.println(user);
      System.out.println(password);
   }

   @Action
   public void clear() {
      setUser(null);
      setPassword(null);
   }
}
</pre></div>
  
      <p>Then, there is the code for showing a UI bound to this form using 
      Swing:</p>

    <div class="source"><pre>
@ViewHandler
public class LoginSwingView extends JDialog {
   public LoginSwingView() {
      super(new JFrame(), "Login");
      initComponents();

      SwingBinder binder = new SwingBinder(this, new LoginForm());
      binder.bind();
   }
   
   private void initComponents() {
      getContentPane().setLayout(new GridLayout(2, 1));

      JPanel dataPanel = new JPanel();
      dataPanel.setLayout(new GridLayout(2, 2, 5, 5));

      JLabel labelUser = new JLabel();
      labelUser.setText("User");
      dataPanel.add(labelUser);

      JTextField user = new JTextField();
      user.setName("user");
      dataPanel.add(user);

      JLabel labelPassword = new JLabel();
      labelPassword.setText("Password");
      dataPanel.add(labelPassword);

      JPasswordField password = new JPasswordField();
      password.setName("password");
      dataPanel.add(password);

      getContentPane().add(dataPanel);

      JPanel buttonPanel = new JPanel();

      JButton login = new JButton();
      login.setText("Login");
      login.setName("login");
      buttonPanel.add(login);

      JButton clear = new JButton();
      clear.setText("Clear");
      clear.setName("clear");
      buttonPanel.add(clear);

      getContentPane().add(buttonPanel);

      pack();

      setLocationRelativeTo(null);

      addWindowListener(new WindowAdapter() {
         public void windowClosing(WindowEvent e) {
            System.exit(0);
         }
      });
   }

   public static void main(String args[]) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            new LoginSwingView().setVisible(true);
         }
      });
   }
}
</pre></div>
  
      <p>Next, there is the code for showing a UI bound to this form using 
      SWT:</p>

    <div class="source"><pre>
@ViewHandler
public class LoginSWTView {
   private Shell shell = null;
   private Composite composite = null;
   private Label labelUser = null;
   private Text user = null;
   private Label labelPassword = null;
   private Text password = null;
   private Composite compositeButtons = null;
   private Button clear = null;
   private Button login = null;

   public LoginSWTView() {
      createShell();
      SWTBinder binder = new SWTBinder(shell, new LoginForm(), this);
      binder.bind();
   }

   private void createShell() {
      shell = new Shell();
      shell.setText("Login");
      createComposite();
      createCompositeButtons();
      shell.setLayout(new GridLayout());
      
      shell.pack();
   }

   private void createComposite() {
      GridLayout gridLayout = new GridLayout();
      gridLayout.numColumns = 2;

      GridData gridData = new GridData();
      gridData.horizontalAlignment = GridData.FILL;
      gridData.verticalAlignment = GridData.FILL;

      composite = new Composite(shell, SWT.NONE);
      composite.setLayoutData(gridData);
      composite.setLayout(gridLayout);

      labelUser = new Label(composite, SWT.NONE);
      labelUser.setText("User");

      user = new Text(composite, SWT.BORDER);
      user.setData("user");

      labelPassword = new Label(composite, SWT.NONE);
      labelPassword.setText("Password");

      password = new Text(composite, SWT.BORDER | SWT.PASSWORD);
      password.setData("password");
   }

   private void createCompositeButtons() {
      RowLayout rowLayout = new RowLayout();
      rowLayout.fill = true;
      
      GridData gridData = new GridData();
      gridData.horizontalAlignment = GridData.END;
      gridData.verticalAlignment = GridData.FILL;

      compositeButtons = new Composite(shell, SWT.NONE);
      compositeButtons.setLayoutData(gridData);
      compositeButtons.setLayout(rowLayout);
      
      clear = new Button(compositeButtons, SWT.NONE);
      clear.setText("Clear");
      clear.setData("clear");

      login = new Button(compositeButtons, SWT.NONE);
      login.setText("Login");
      login.setData("login");
   }

   public void display() throws Exception {
      final Display display = Display.getDefault();
      Rectangle bounds = display.getBounds();
      shell.setLocation(bounds.x
            + (bounds.width - shell.getBounds().width) / 2, bounds.y
            + (bounds.height - shell.getBounds().height) / 2);

      shell.open();
      shell.forceActive();
      
      while (!shell.isDisposed()) {
         if (!display.readAndDispatch()) {
            display.sleep();
         }
      }

      display.dispose();
   }

   public static void main(String[] args) throws Exception {
      new LoginSWTView().display();
   }
}
</pre></div>
  
      <p>Finally, both the xml file and the required code to present the same 
      form using Thinlet are shown:</p>

    <div class="source"><pre>

 1. &lt;panel gap="5" top="5" left="5" bottom="5" right="5" weightx="1"
 2.        weighty="1"&gt;
 3.    &lt;panel gap="5" columns="2" weightx="1"&gt;
 4.       &lt;label text="User" font="bold" /&gt;
 5.       &lt;textfield name="user" columns="10" /&gt;
 6.       &lt;label text="Password" font="bold" /&gt;
 7.       &lt;passwordfield name="password" columns="10" /&gt;
 8.    &lt;/panel&gt;
 9.    &lt;panel gap="5" halign="center" weightx="1"&gt;
10.       &lt;button name="login" text="Login" /&gt;
11.       &lt;button name="reset" text="Reset" /&gt;
12.    &lt;/panel&gt;
13. &lt;/panel&gt;

</pre></div>
  

    <div class="source"><pre>
public class LoginThinletView extends BaseDialogThinlet {
   public LoginThinletView() throws Exception {
      getDialog().setTitle("Login");

      add(parse("login.xml"));
      bind(new LoginForm());
   }

   public static void main(String[] args) throws Exception {
      new LoginThinletView().display();
   }
}
</pre></div>
  
      <p>By analyzing this example, it is possible to notice a few important 
      things about how to define a form. A form class should be annotated with 
      <code>@Form</code>, which tells genesis that this class must be handled 
      in a special way so it provides all information required for binding.</p>
      <p>Properties exposed by setters and getters - in this case, 
      <code>user</code> and <code>password</code> - can be dynamically bound to
      several widgets in the UI, such as textfields, passwordfields, labels and
      others. For it to work, each component name must be equal to a property 
      name. If you are using Swing, the <code>setName(String)</code> method of
      each component should be used for that. If you are using SWT, the 
      <code>setData(Object)</code> method of each component should be used for 
      that. If Thinlet is being used, an easy way to configure a widget name is 
      by defining its <code>name</code> property in the xml file as shown 
      above.</p>
      <p>Both the form property value and its display value will be in synch
      when the component that represents the property loses focus. In the 
      example above, this happens whenever the user presses the TAB key or 
      clicks somewhere else when either the <code>user</code> or the 
      <code>password</code> textboxes have focus.</p>
      <p>Methods can also be bound to buttons in the GUI. In order to do that,
      these methods must be annotated with <code>@Action</code> and there must
      be buttons in the interface whose <code>name</code> property is equal to 
      their names. Then, whenever a button is triggered, the matching method in 
      the form is invoked. For the example above, when the Login button is 
      clicked, the current value for fields User and Password is printed in the 
      default output, while triggering the Reset button clears both fields' 
      content in the form and in the screen.</p>
      <p>How to perform the binding depends on the graphical API being used. For
      all APIs, there is a class that is known as <b>view</b>, i.e., the class
      that defines the UI and calls the methods that perform the binding. If
      Swing or SWT are being used, the view must always be annotated with
      <code>@ViewHandler</code>. As shown above, the Swing binding is performed
      by using the helper class named <code>SwingBinder</code>, while the SWT 
      binding is implemented by <code>SWTBinder</code>. This class makes it 
      possible to customize the binding process, although the code snippet shown 
      above covers most cases. For the Thinlet binding, genesis has two helper 
      classes, <code>BaseThinlet</code> and <code>BaseDialogThinlet</code>, that 
      are used to build standard windows and dialogs, respectively, and that have 
      a <code>bind(Object)</code> method, used above.</p>
      <p>The following sections will give more details about each binding.</p>
    </div></div></div><div class="clear"><hr></hr></div><div id="footer"><div class="xright">© 2004-2006, Summa Tecnologies do Brasil Ltda.</div><div class="clear"><hr></hr></div></div></body></html>